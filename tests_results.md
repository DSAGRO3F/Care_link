(env) odb_admin_1@admin-odbs-MacBook-Air backend % pytest -v -m "not integration"
=================================================================================================================================================== test session starts ====================================================================================================================================================
platform darwin -- Python 3.13.9, pytest-8.4.2, pluggy-1.5.0 -- /opt/anaconda3/envs/env/bin/python
cachedir: .pytest_cache
rootdir: /Users/odb_admin_1/CareLink/backend
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.10.0, langsmith-0.4.32, dash-2.14.2
collected 512 items / 13 deselected / 499 selected                                                                                                                                                                                                                                                                         

tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_list_care_plans <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                            [  0%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_list_plans_filter_by_patient <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                               [  0%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_list_plans_filter_by_status <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                [  0%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_get_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                              [  0%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_get_care_plan_not_found <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                    [  1%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_create_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                           [  1%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_create_care_plan_with_services <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                             [  1%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_create_care_plan_patient_not_found <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                         [  1%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_update_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                           [  1%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_delete_care_plan_draft <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                     [  2%]
tests/test_api/test_careplan.py::TestCarePlanEndpoints::test_delete_care_plan_active_fails <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                              [  2%]
tests/test_api/test_careplan.py::TestCarePlanWorkflow::test_submit_for_validation <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                       [  2%]
tests/test_api/test_careplan.py::TestCarePlanWorkflow::test_validate_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                          [  2%]
tests/test_api/test_careplan.py::TestCarePlanWorkflow::test_suspend_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                           [  2%]
tests/test_api/test_careplan.py::TestCarePlanWorkflow::test_reactivate_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                        [  3%]
tests/test_api/test_careplan.py::TestCarePlanWorkflow::test_complete_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                          [  3%]
tests/test_api/test_careplan.py::TestCarePlanWorkflow::test_cancel_care_plan <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                            [  3%]
tests/test_api/test_careplan.py::TestCarePlanServiceEndpoints::test_list_plan_services <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                  [  3%]
tests/test_api/test_careplan.py::TestCarePlanServiceEndpoints::test_get_plan_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                    [  3%]
tests/test_api/test_careplan.py::TestCarePlanServiceEndpoints::test_create_plan_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                 [  4%]
tests/test_api/test_careplan.py::TestCarePlanServiceEndpoints::test_update_plan_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                 [  4%]
tests/test_api/test_careplan.py::TestCarePlanServiceEndpoints::test_delete_plan_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                 [  4%]
tests/test_api/test_careplan.py::TestServiceAssignment::test_assign_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                             [  4%]
tests/test_api/test_careplan.py::TestServiceAssignment::test_propose_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                            [  4%]
tests/test_api/test_careplan.py::TestServiceAssignment::test_unassign_service <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                           [  5%]
tests/test_api/test_careplan.py::TestServiceAssignment::test_confirm_assignment <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                         [  5%]
tests/test_api/test_careplan.py::TestServiceAssignment::test_reject_assignment <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                          [  5%]
tests/test_api/test_careplan.py::TestServiceAssignment::test_reject_non_pending_fails <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                   [  5%]
tests/test_api/test_careplan.py::TestValidation::test_invalid_frequency_type <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                            [  5%]
tests/test_api/test_careplan.py::TestValidation::test_invalid_priority <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                                  [  6%]
tests/test_api/test_careplan.py::TestValidation::test_invalid_frequency_days <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                            [  6%]
tests/test_api/test_careplan.py::TestValidation::test_invalid_gir_score <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                                 [  6%]
tests/test_api/test_careplan.py::TestValidation::test_invalid_assignment_mode <- ../tests/test_api/test_careplan.py PASSED                                                                                                                                                                                           [  6%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_list_service_templates <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                [  6%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_list_templates_filter_by_category <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                     [  7%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_list_templates_filter_medical_act <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                     [  7%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_list_templates_search <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                 [  7%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_get_categories <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                        [  7%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_get_templates_by_category <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                             [  7%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_get_service_template <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                  [  8%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_get_service_template_not_found <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                        [  8%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_get_service_template_by_code <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                          [  8%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_create_service_template <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                               [  8%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_create_template_duplicate_code <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                        [  8%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_create_template_unauthorized <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                          [  9%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_update_service_template <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                               [  9%]
tests/test_api/test_catalog.py::TestServiceTemplateEndpoints::test_delete_service_template <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                               [  9%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_list_entity_services <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                    [  9%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_list_entity_services_all <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                [  9%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_get_entity_service <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                      [ 10%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_get_entity_service_wrong_entity <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                         [ 10%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_create_entity_service <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                   [ 10%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_create_entity_service_duplicate <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                         [ 10%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_create_entity_service_entity_not_found <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                  [ 10%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_create_entity_service_template_not_found <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                [ 11%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_update_entity_service <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                   [ 11%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_delete_entity_service <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                   [ 11%]
tests/test_api/test_catalog.py::TestEntityServiceEndpoints::test_effective_duration_uses_custom <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                          [ 11%]
tests/test_api/test_catalog.py::TestValidation::test_invalid_category <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                                    [ 11%]
tests/test_api/test_catalog.py::TestValidation::test_invalid_duration_too_short <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                          [ 12%]
tests/test_api/test_catalog.py::TestValidation::test_invalid_duration_too_long <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                           [ 12%]
tests/test_api/test_catalog.py::TestValidation::test_invalid_price_negative <- ../tests/test_api/test_catalog.py PASSED                                                                                                                                                                                              [ 12%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_list_coordination_entries <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                 [ 12%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_list_entries_filter_by_patient <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                            [ 12%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_list_entries_filter_by_category <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                           [ 13%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_get_coordination_entry <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                    [ 13%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_get_entry_not_found <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                       [ 13%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_create_coordination_entry <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                 [ 13%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_create_entry_patient_not_found <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                            [ 13%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_update_coordination_entry <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                 [ 14%]
tests/test_api/test_coordination.py::TestCoordinationEntryEndpoints::test_delete_coordination_entry <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                 [ 14%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_list_scheduled_interventions <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                          [ 14%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_list_interventions_filter_by_date <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                     [ 14%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_list_interventions_filter_by_patient <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                  [ 14%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_list_interventions_filter_by_user <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                     [ 15%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_get_scheduled_intervention <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                            [ 15%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_start_intervention <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                    [ 15%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_complete_intervention <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                 [ 15%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_cancel_intervention <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                   [ 15%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_mark_intervention_missed <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                              [ 16%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_reschedule_intervention <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                               [ 16%]
tests/test_api/test_coordination.py::TestScheduledInterventionEndpoints::test_complete_without_in_progress_fails <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                    [ 16%]
tests/test_api/test_coordination.py::TestPlanningEndpoints::test_get_daily_planning <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                                 [ 16%]
tests/test_api/test_coordination.py::TestPlanningEndpoints::test_get_my_daily_planning <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                              [ 16%]
tests/test_api/test_coordination.py::TestValidation::test_invalid_category <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                                          [ 17%]
tests/test_api/test_coordination.py::TestValidation::test_cancel_without_reason_fails <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                               [ 17%]
tests/test_api/test_coordination.py::TestValidation::test_cancel_reason_too_short <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                                   [ 17%]
tests/test_api/test_coordination.py::TestMultiTenantIsolation::test_cannot_access_other_tenant_entry <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                                [ 17%]
tests/test_api/test_coordination.py::TestMultiTenantIsolation::test_list_only_shows_current_tenant_entries <- ../tests/test_api/test_coordination.py PASSED                                                                                                                                                          [ 17%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_list_countries <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 18%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_list_countries_pagination <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                           [ 18%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_create_country <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 18%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_create_country_duplicate_code <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                       [ 18%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_create_country_code_normalized <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                      [ 18%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_get_country <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                         [ 19%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_get_country_not_found <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                               [ 19%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_update_country <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 19%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_delete_country <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 19%]
tests/test_api/test_organization.py::TestCountryEndpoints::test_unauthorized_without_token <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                          [ 19%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_list_entities <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                        [ 20%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_list_entities_with_filters <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                           [ 20%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_search_entities <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 20%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_create_entity <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                        [ 20%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_create_entity_duplicate_finess <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                       [ 20%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_get_entity <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                           [ 21%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_get_entity_not_found <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                 [ 21%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_update_entity <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                        [ 21%]
tests/test_api/test_organization.py::TestEntityEndpoints::test_delete_entity <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                        [ 21%]
tests/test_api/test_organization.py::TestEntityHierarchy::test_create_child_entity <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                  [ 21%]
tests/test_api/test_organization.py::TestEntityHierarchy::test_get_entity_children <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                  [ 22%]
tests/test_api/test_organization.py::TestEntityHierarchy::test_get_hierarchy <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                        [ 22%]
tests/test_api/test_organization.py::TestEntityHierarchy::test_get_hierarchy_from_root <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                              [ 22%]
tests/test_api/test_organization.py::TestEntityHierarchy::test_prevent_circular_hierarchy <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                           [ 22%]
tests/test_api/test_organization.py::TestValidation::test_invalid_siret_format <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 22%]
tests/test_api/test_organization.py::TestValidation::test_invalid_siret_length <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                      [ 23%]
tests/test_api/test_organization.py::TestValidation::test_invalid_finess_length <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                     [ 23%]
tests/test_api/test_organization.py::TestValidation::test_invalid_entity_type <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                       [ 23%]
tests/test_api/test_organization.py::TestValidation::test_invalid_email <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                             [ 23%]
tests/test_api/test_organization.py::TestValidation::test_invalid_country_code_length <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                               [ 23%]
tests/test_api/test_organization.py::TestValidation::test_invalid_country_code_non_alpha <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                            [ 24%]
tests/test_api/test_organization.py::TestValidation::test_country_not_found_on_entity_creation <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                      [ 24%]
tests/test_api/test_organization.py::TestAuthentication::test_list_countries_requires_auth <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                          [ 24%]
tests/test_api/test_organization.py::TestAuthentication::test_list_entities_requires_auth <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                           [ 24%]
tests/test_api/test_organization.py::TestAuthentication::test_create_entity_requires_auth <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                           [ 24%]
tests/test_api/test_organization.py::TestHealthCheck::test_health_check <- ../tests/test_api/test_organization.py PASSED                                                                                                                                                                                             [ 25%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_list_patients <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                 [ 25%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_list_patients_filter_by_entity <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                [ 25%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_list_patients_filter_by_status <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                [ 25%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_get_patient <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                   [ 25%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_get_patient_not_found <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                         [ 26%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_create_patient <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                [ 26%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_create_patient_entity_not_found <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                               [ 26%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_update_patient <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                [ 26%]
tests/test_api/test_patient.py::TestPatientEndpoints::test_delete_patient_archives <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                       [ 26%]
tests/test_api/test_patient.py::TestPatientAccessEndpoints::test_list_patient_access <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                     [ 27%]
tests/test_api/test_patient.py::TestPatientAccessEndpoints::test_grant_patient_access <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                    [ 27%]
tests/test_api/test_patient.py::TestPatientAccessEndpoints::test_grant_access_patient_not_found <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                          [ 27%]
tests/test_api/test_patient.py::TestPatientAccessEndpoints::test_grant_access_reason_required <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                            [ 27%]
tests/test_api/test_patient.py::TestPatientAccessEndpoints::test_revoke_patient_access <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                   [ 27%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_list_patient_evaluations <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                            [ 28%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_get_patient_evaluation <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                              [ 28%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_create_patient_evaluation <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                           [ 28%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_update_patient_evaluation <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                           [ 28%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_update_validated_evaluation_fails <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                   [ 28%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_validate_patient_evaluation <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                         [ 29%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_delete_non_validated_evaluation <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                     [ 29%]
tests/test_api/test_patient.py::TestPatientEvaluationEndpoints::test_delete_validated_evaluation_fails <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                   [ 29%]
tests/test_api/test_patient.py::TestPatientThresholdEndpoints::test_list_patient_thresholds <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                              [ 29%]
tests/test_api/test_patient.py::TestPatientThresholdEndpoints::test_create_patient_threshold <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                             [ 29%]
tests/test_api/test_patient.py::TestPatientThresholdEndpoints::test_create_threshold_duplicate_fails <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                     [ 30%]
tests/test_api/test_patient.py::TestPatientThresholdEndpoints::test_update_patient_threshold <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                             [ 30%]
tests/test_api/test_patient.py::TestPatientThresholdEndpoints::test_delete_patient_threshold <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                             [ 30%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_list_patient_vitals <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                     [ 30%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_list_vitals_filter_by_type <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                              [ 30%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_get_latest_vital_by_type <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                [ 31%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_get_latest_vital_not_found <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                              [ 31%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_create_patient_vital <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                    [ 31%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_create_vital_with_threshold_check <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                       [ 31%]
tests/test_api/test_patient.py::TestPatientVitalsEndpoints::test_delete_patient_vital <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                    [ 31%]
tests/test_api/test_patient.py::TestPatientDeviceEndpoints::test_list_patient_devices <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                    [ 32%]
tests/test_api/test_patient.py::TestPatientDeviceEndpoints::test_create_patient_device <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                   [ 32%]
tests/test_api/test_patient.py::TestPatientDeviceEndpoints::test_create_device_duplicate_fails <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                           [ 32%]
tests/test_api/test_patient.py::TestPatientDeviceEndpoints::test_update_patient_device <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                   [ 32%]
tests/test_api/test_patient.py::TestPatientDeviceEndpoints::test_delete_patient_device_deactivates <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                       [ 32%]
tests/test_api/test_patient.py::TestPatientDocumentEndpoints::test_list_patient_documents <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                [ 33%]
tests/test_api/test_patient.py::TestPatientDocumentEndpoints::test_list_documents_filter_by_type <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                         [ 33%]
tests/test_api/test_patient.py::TestPatientDocumentEndpoints::test_get_patient_document <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                  [ 33%]
tests/test_api/test_patient.py::TestPatientDocumentEndpoints::test_delete_patient_document_admin_only <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                    [ 33%]
tests/test_api/test_patient.py::TestValidation::test_invalid_access_type <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                 [ 33%]
tests/test_api/test_patient.py::TestValidation::test_invalid_vital_type <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                  [ 34%]
tests/test_api/test_patient.py::TestValidation::test_invalid_device_type <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                                 [ 34%]
tests/test_api/test_patient.py::TestAuthentication::test_list_patients_requires_auth <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                     [ 34%]
tests/test_api/test_patient.py::TestAuthentication::test_create_patient_requires_auth <- ../tests/test_api/test_patient.py PASSED                                                                                                                                                                                    [ 34%]
tests/test_api/test_tenants.py::TestTenantList::test_list_tenants_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                                [ 34%]
tests/test_api/test_tenants.py::TestTenantList::test_list_tenants_filter_by_status <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                       [ 35%]
tests/test_api/test_tenants.py::TestTenantList::test_list_tenants_filter_by_type <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                         [ 35%]
tests/test_api/test_tenants.py::TestTenantList::test_list_tenants_search <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                                 [ 35%]
tests/test_api/test_tenants.py::TestTenantList::test_list_tenants_pagination <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                             [ 35%]
tests/test_api/test_tenants.py::TestTenantList::test_list_tenants_requires_auth <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                          [ 35%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                             [ 36%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_full_data <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                           [ 36%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_duplicate_code <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                      [ 36%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_duplicate_siret <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                     [ 36%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_invalid_siret_format <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                [ 36%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_invalid_email <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                       [ 37%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_support_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                   [ 37%]
tests/test_api/test_tenants.py::TestTenantCreate::test_create_tenant_admin_allowed <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                       [ 37%]
tests/test_api/test_tenants.py::TestTenantRead::test_get_tenant_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                                  [ 37%]
tests/test_api/test_tenants.py::TestTenantRead::test_get_tenant_not_found <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                                [ 37%]
tests/test_api/test_tenants.py::TestTenantUpdate::test_update_tenant_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                             [ 38%]
tests/test_api/test_tenants.py::TestTenantUpdate::test_update_tenant_limits <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                              [ 38%]
tests/test_api/test_tenants.py::TestTenantUpdate::test_update_tenant_duplicate_siret <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                     [ 38%]
tests/test_api/test_tenants.py::TestTenantUpdate::test_update_tenant_not_found <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                           [ 38%]
tests/test_api/test_tenants.py::TestTenantUpdate::test_update_tenant_support_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                   [ 38%]
tests/test_api/test_tenants.py::TestTenantStatusChanges::test_suspend_tenant_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                     [ 39%]
tests/test_api/test_tenants.py::TestTenantStatusChanges::test_suspend_tenant_already_terminated <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                          [ 39%]
tests/test_api/test_tenants.py::TestTenantStatusChanges::test_activate_tenant_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                    [ 39%]
tests/test_api/test_tenants.py::TestTenantStatusChanges::test_activate_tenant_sets_activated_at <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                          [ 39%]
tests/test_api/test_tenants.py::TestTenantStatusChanges::test_activate_tenant_already_terminated <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                         [ 39%]
tests/test_api/test_tenants.py::TestTenantStatusChanges::test_suspend_tenant_support_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                           [ 40%]
tests/test_api/test_tenants.py::TestTenantDelete::test_terminate_tenant_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                          [ 40%]
tests/test_api/test_tenants.py::TestTenantDelete::test_terminate_tenant_requires_confirmation <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                            [ 40%]
tests/test_api/test_tenants.py::TestTenantDelete::test_terminate_tenant_already_terminated <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                               [ 40%]
tests/test_api/test_tenants.py::TestTenantDelete::test_terminate_tenant_not_found <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                        [ 40%]
tests/test_api/test_tenants.py::TestTenantDelete::test_terminate_tenant_support_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                [ 41%]
tests/test_api/test_tenants.py::TestSubscriptionList::test_list_subscriptions_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                    [ 41%]
tests/test_api/test_tenants.py::TestSubscriptionList::test_list_subscriptions_filter_by_status <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                           [ 41%]
tests/test_api/test_tenants.py::TestSubscriptionList::test_list_subscriptions_tenant_not_found <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                           [ 41%]
tests/test_api/test_tenants.py::TestSubscriptionGetActive::test_get_active_subscription_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                          [ 41%]
tests/test_api/test_tenants.py::TestSubscriptionGetActive::test_get_active_subscription_trial <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                            [ 42%]
tests/test_api/test_tenants.py::TestSubscriptionGetActive::test_get_active_subscription_none <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                             [ 42%]
tests/test_api/test_tenants.py::TestSubscriptionGetById::test_get_subscription_by_id_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                             [ 42%]
tests/test_api/test_tenants.py::TestSubscriptionGetById::test_get_subscription_wrong_tenant <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                              [ 42%]
tests/test_api/test_tenants.py::TestSubscriptionCreate::test_create_subscription_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                 [ 42%]
tests/test_api/test_tenants.py::TestSubscriptionCreate::test_create_subscription_cancels_previous <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                        [ 43%]
tests/test_api/test_tenants.py::TestSubscriptionCreate::test_create_subscription_support_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                       [ 43%]
tests/test_api/test_tenants.py::TestSubscriptionUpdate::test_update_subscription_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                 [ 43%]
tests/test_api/test_tenants.py::TestSubscriptionStatusChanges::test_activate_subscription_from_trial <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                     [ 43%]
tests/test_api/test_tenants.py::TestSubscriptionStatusChanges::test_activate_subscription_cancelled_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                            [ 43%]
tests/test_api/test_tenants.py::TestSubscriptionStatusChanges::test_cancel_subscription_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                          [ 44%]
tests/test_api/test_tenants.py::TestSubscriptionStatusChanges::test_cancel_subscription_already_cancelled <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                [ 44%]
tests/test_api/test_tenants.py::TestSubscriptionStatusChanges::test_mark_past_due_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                [ 44%]
tests/test_api/test_tenants.py::TestSubscriptionStatusChanges::test_mark_past_due_inactive_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                     [ 44%]
tests/test_api/test_tenants.py::TestUsageList::test_list_usage_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                                   [ 44%]
tests/test_api/test_tenants.py::TestUsageList::test_list_usage_filter_by_year <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                            [ 45%]
tests/test_api/test_tenants.py::TestUsageList::test_list_usage_filter_by_invoiced <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                        [ 45%]
tests/test_api/test_tenants.py::TestUsageList::test_list_usage_no_subscription <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                           [ 45%]
tests/test_api/test_tenants.py::TestUsageCurrent::test_get_current_usage_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                         [ 45%]
tests/test_api/test_tenants.py::TestUsageCurrent::test_get_current_usage_no_subscription <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                 [ 45%]
tests/test_api/test_tenants.py::TestUsageGetById::test_get_usage_by_id_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                           [ 46%]
tests/test_api/test_tenants.py::TestUsageGetById::test_get_usage_wrong_tenant <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                            [ 46%]
tests/test_api/test_tenants.py::TestUsageMarkInvoiced::test_mark_invoiced_success <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                                        [ 46%]
tests/test_api/test_tenants.py::TestUsageMarkInvoiced::test_mark_invoiced_already_invoiced <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                               [ 46%]
tests/test_api/test_tenants.py::TestUsageMarkInvoiced::test_mark_invoiced_support_forbidden <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                              [ 46%]
tests/test_api/test_tenants.py::TestAuthentication::test_tenant_endpoints_require_superadmin_auth <- ../tests/test_api/test_tenants.py PASSED                                                                                                                                                                        [ 47%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_list_professions <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                 [ 47%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_list_professions_filter_by_category <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                              [ 47%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_get_profession <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                   [ 47%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_get_profession_not_found <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                         [ 47%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_create_profession <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                [ 48%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_create_profession_duplicate_name <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                 [ 48%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_update_profession <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                [ 48%]
tests/test_api/test_user.py::TestProfessionEndpoints::test_delete_profession <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                [ 48%]
tests/test_api/test_user.py::TestRoleEndpoints::test_list_roles <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                             [ 48%]
tests/test_api/test_user.py::TestRoleEndpoints::test_list_roles_filter_system <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                               [ 49%]
tests/test_api/test_user.py::TestRoleEndpoints::test_get_role <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                               [ 49%]
tests/test_api/test_user.py::TestRoleEndpoints::test_create_role <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                            [ 49%]
tests/test_api/test_user.py::TestRoleEndpoints::test_create_role_duplicate_name <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                             [ 49%]
tests/test_api/test_user.py::TestRoleEndpoints::test_update_system_role_description_allowed <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                 [ 49%]
tests/test_api/test_user.py::TestRoleEndpoints::test_update_system_role_name_forbidden <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                      [ 50%]
tests/test_api/test_user.py::TestRoleEndpoints::test_delete_system_role_forbidden <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                           [ 50%]
tests/test_api/test_user.py::TestRoleEndpoints::test_delete_custom_role <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                     [ 50%]
tests/test_api/test_user.py::TestUserEndpoints::test_list_users <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                             [ 50%]
tests/test_api/test_user.py::TestUserEndpoints::test_list_users_filter_by_profession <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                        [ 50%]
tests/test_api/test_user.py::TestUserEndpoints::test_list_users_search <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                      [ 51%]
tests/test_api/test_user.py::TestUserEndpoints::test_get_current_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                       [ 51%]
tests/test_api/test_user.py::TestUserEndpoints::test_get_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                               [ 51%]
tests/test_api/test_user.py::TestUserEndpoints::test_get_user_not_found <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                     [ 51%]
tests/test_api/test_user.py::TestUserEndpoints::test_create_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                            [ 51%]
tests/test_api/test_user.py::TestUserEndpoints::test_create_user_duplicate_email <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                            [ 52%]
tests/test_api/test_user.py::TestUserEndpoints::test_update_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                            [ 52%]
tests/test_api/test_user.py::TestUserEndpoints::test_update_own_profile <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                     [ 52%]
tests/test_api/test_user.py::TestUserEndpoints::test_update_other_profile_forbidden <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                         [ 52%]
tests/test_api/test_user.py::TestUserEndpoints::test_update_is_admin_requires_admin <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                         [ 52%]
tests/test_api/test_user.py::TestUserEndpoints::test_delete_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                            [ 53%]
tests/test_api/test_user.py::TestUserRolesEndpoints::test_get_user_roles <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                    [ 53%]
tests/test_api/test_user.py::TestUserRolesEndpoints::test_add_role_to_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                  [ 53%]
tests/test_api/test_user.py::TestUserRolesEndpoints::test_add_duplicate_role_fails <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                          [ 53%]
tests/test_api/test_user.py::TestUserRolesEndpoints::test_remove_role_from_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                             [ 53%]
tests/test_api/test_user.py::TestUserEntitiesEndpoints::test_get_user_entities <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                              [ 54%]
tests/test_api/test_user.py::TestUserEntitiesEndpoints::test_add_entity_to_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                             [ 54%]
tests/test_api/test_user.py::TestUserEntitiesEndpoints::test_add_duplicate_entity_fails <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                     [ 54%]
tests/test_api/test_user.py::TestUserEntitiesEndpoints::test_update_user_entity <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                             [ 54%]
tests/test_api/test_user.py::TestUserEntitiesEndpoints::test_remove_entity_from_user <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                        [ 54%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_get_user_availabilities <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                  [ 55%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_get_availabilities_filter_by_day <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                         [ 55%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_create_availability <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                      [ 55%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_create_availability_for_other_user_forbidden <- ../tests/test_api/test_user.py PASSED                                                                                                                                                             [ 55%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_create_availability_invalid_time_range <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                   [ 55%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_update_availability <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                      [ 56%]
tests/test_api/test_user.py::TestUserAvailabilitiesEndpoints::test_delete_availability <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                      [ 56%]
tests/test_api/test_user.py::TestValidation::test_invalid_email <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                             [ 56%]
tests/test_api/test_user.py::TestValidation::test_invalid_profession_category <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                               [ 56%]
tests/test_api/test_user.py::TestValidation::test_invalid_day_of_week <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                       [ 56%]
tests/test_api/test_user.py::TestValidation::test_invalid_contract_type <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                                     [ 57%]
tests/test_api/test_user.py::TestAuthentication::test_list_users_requires_auth <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                              [ 57%]
tests/test_api/test_user.py::TestAuthentication::test_create_user_requires_auth <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                             [ 57%]
tests/test_api/test_user.py::TestAuthentication::test_create_role_requires_admin <- ../tests/test_api/test_user.py PASSED                                                                                                                                                                                            [ 57%]
tests/test_models/test_availability.py::TestUserAvailability::test_create_availability <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                                           [ 57%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_relations <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                                        [ 58%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_duration_minutes <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                                 [ 58%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_duration_hours <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                                   [ 58%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_is_valid_on_correct_day <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                          [ 58%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_is_valid_on_wrong_day <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                            [ 58%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_is_valid_on_inactive <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                             [ 59%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_overlaps_with_same_day <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                           [ 59%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_no_overlap_different_day <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                         [ 59%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_no_overlap_adjacent <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                              [ 59%]
tests/test_models/test_availability.py::TestUserAvailability::test_availability_str <- ../tests/test_models/test_availability.py PASSED                                                                                                                                                                              [ 59%]
tests/test_models/test_base_models.py::TestCountry::test_create_country <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                           [ 60%]
tests/test_models/test_base_models.py::TestCountry::test_country_code_unique <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                      [ 60%]
tests/test_models/test_base_models.py::TestCountry::test_country_str <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                              [ 60%]
tests/test_models/test_base_models.py::TestCountry::test_country_repr <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                             [ 60%]
tests/test_models/test_base_models.py::TestEntity::test_create_entity <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                             [ 60%]
tests/test_models/test_base_models.py::TestEntity::test_entity_country_relation <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                   [ 61%]
tests/test_models/test_base_models.py::TestEntity::test_entity_tenant_relation <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                    [ 61%]
tests/test_models/test_base_models.py::TestEntity::test_entity_siren_shared <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                       [ 61%]
tests/test_models/test_base_models.py::TestEntity::test_entity_siret_unique <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                       [ 61%]
tests/test_models/test_base_models.py::TestEntity::test_entity_finess_unique <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                      [ 61%]
tests/test_models/test_base_models.py::TestEntity::test_entity_str <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                                [ 62%]
tests/test_models/test_base_models.py::TestProfession::test_create_profession <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                     [ 62%]
tests/test_models/test_base_models.py::TestProfession::test_profession_name_unique <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                [ 62%]
tests/test_models/test_base_models.py::TestProfession::test_profession_is_medical <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                 [ 62%]
tests/test_models/test_base_models.py::TestProfession::test_profession_is_paramedical <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                             [ 62%]
tests/test_models/test_base_models.py::TestProfession::test_profession_str <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                        [ 63%]
tests/test_models/test_base_models.py::TestRole::test_create_role <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                                 [ 63%]
tests/test_models/test_base_models.py::TestRole::test_role_name_unique_per_tenant <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                 [ 63%]
tests/test_models/test_base_models.py::TestRole::test_role_has_permission <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                         [ 63%]
tests/test_models/test_base_models.py::TestRole::test_role_admin_has_all_permissions <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                              [ 63%]
tests/test_models/test_base_models.py::TestRole::test_role_permissions_property <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                   [ 64%]
tests/test_models/test_base_models.py::TestRole::test_role_str <- ../tests/test_models/test_base_models.py PASSED                                                                                                                                                                                                    [ 64%]
tests/test_models/test_careplan.py::TestCarePlan::test_create_care_plan <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                              [ 64%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_unique_reference <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                    [ 64%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_relations <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                           [ 64%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_is_draft <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                            [ 65%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_is_editable <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                         [ 65%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_submit_for_validation <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                               [ 65%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_validate <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                            [ 65%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_suspend <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                             [ 65%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_reactivate <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                          [ 66%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_complete <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                            [ 66%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_cancel <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                              [ 66%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_services_count <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                                      [ 66%]
tests/test_models/test_careplan.py::TestCarePlan::test_care_plan_assignment_completion_rate <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                          [ 66%]
tests/test_models/test_careplan.py::TestCarePlanService::test_create_care_plan_service <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                               [ 67%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_relations <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                            [ 67%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_is_assigned <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                          [ 67%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_assign_to <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                            [ 67%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_propose_to <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                           [ 67%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_confirm_assignment <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                   [ 68%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_reject_assignment <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                    [ 68%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_unassign <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                             [ 68%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_time_slot_display <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                    [ 68%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_days_display <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                         [ 68%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_frequency_display <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                    [ 69%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_total_weekly_minutes <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                 [ 69%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_total_weekly_hours <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                   [ 69%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_pause_resume <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                         [ 69%]
tests/test_models/test_careplan.py::TestCarePlanService::test_care_plan_service_complete <- ../tests/test_models/test_careplan.py PASSED                                                                                                                                                                             [ 69%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_create_service_template <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                                  [ 70%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_unique_code <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                             [ 70%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_relation_profession <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                     [ 70%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_polyvalent <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                              [ 70%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_is_active <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                               [ 70%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_requires_professional <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                   [ 71%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_deactivate <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                              [ 71%]
tests/test_models/test_catalog.py::TestServiceTemplate::test_service_template_activate <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                                [ 71%]
tests/test_models/test_catalog.py::TestEntityService::test_create_entity_service <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                                      [ 71%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_unique_constraint <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                           [ 71%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_relations <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                                   [ 72%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_effective_duration_custom <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                   [ 72%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_effective_duration_default <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                  [ 72%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_has_custom_duration <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                         [ 72%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_has_custom_price <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                            [ 72%]
tests/test_models/test_catalog.py::TestEntityService::test_entity_service_str <- ../tests/test_models/test_catalog.py PASSED                                                                                                                                                                                         [ 73%]
tests/test_models/test_coordination.py::TestPatientDocument::test_create_document <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                                [ 73%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_patient_relation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                      [ 73%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_generator_relation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                    [ 73%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_with_source_evaluation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                [ 73%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_with_generation_context <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                               [ 74%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_is_ppa <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                                [ 74%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_is_ppcs <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                               [ 74%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_is_recommendation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                     [ 74%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_file_extension <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                        [ 74%]
tests/test_models/test_coordination.py::TestPatientDocument::test_document_str <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                                   [ 75%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_create_entry <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                                 [ 75%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_patient_relation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                       [ 75%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_user_relation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                          [ 75%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_with_observations <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                      [ 75%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_is_active <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                              [ 76%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_soft_delete <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                            [ 76%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_restore <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                                [ 76%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_is_recent_true <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                         [ 76%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_is_recent_false <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                        [ 76%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_entry_all_categories <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                                         [ 77%]
tests/test_models/test_coordination.py::TestCoordinationEntry::test_patient_coordination_entries_relation <- ../tests/test_models/test_coordination.py PASSED                                                                                                                                                        [ 77%]
tests/test_models/test_patient.py::TestPatient::test_create_patient <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                                   [ 77%]
tests/test_models/test_patient.py::TestPatient::test_patient_relations <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                                [ 77%]
tests/test_models/test_patient.py::TestPatient::test_patient_tenant_relation <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                          [ 77%]
tests/test_models/test_patient.py::TestPatient::test_patient_is_active <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                                [ 78%]
tests/test_models/test_patient.py::TestPatient::test_patient_archive <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                                  [ 78%]
tests/test_models/test_patient.py::TestPatient::test_patient_mark_deceased <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                            [ 78%]
tests/test_models/test_patient.py::TestPatient::test_patient_optimistic_locking <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                       [ 78%]
tests/test_models/test_patient.py::TestPatientAccess::test_create_access <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                              [ 78%]
tests/test_models/test_patient.py::TestPatientAccess::test_access_relations <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                           [ 79%]
tests/test_models/test_patient.py::TestPatientAccess::test_access_is_active <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                           [ 79%]
tests/test_models/test_patient.py::TestPatientAccess::test_access_revoke <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                              [ 79%]
tests/test_models/test_patient.py::TestPatientAccess::test_access_can_read <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                            [ 79%]
tests/test_models/test_patient.py::TestPatientAccess::test_access_can_write <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                           [ 79%]
tests/test_models/test_patient.py::TestPatientAccess::test_access_read_only_cannot_write <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                              [ 80%]
tests/test_models/test_patient.py::TestPatientAccess::test_patient_get_active_access <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                  [ 80%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_create_evaluation <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                      [ 80%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_evaluation_relations <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                   [ 80%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_evaluation_validate <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                    [ 80%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_evaluation_aggir_data <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                  [ 81%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_evaluation_extract_gir_score <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                           [ 81%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_patient_latest_evaluation <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                              [ 81%]
tests/test_models/test_patient.py::TestPatientEvaluation::test_patient_current_gir <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                    [ 81%]
tests/test_models/test_patient.py::TestPatientThreshold::test_create_threshold <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                        [ 81%]
tests/test_models/test_patient.py::TestPatientThreshold::test_threshold_check_value_normal <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                            [ 82%]
tests/test_models/test_patient.py::TestPatientThreshold::test_threshold_check_value_low <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                               [ 82%]
tests/test_models/test_patient.py::TestPatientThreshold::test_threshold_check_value_high <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                              [ 82%]
tests/test_models/test_patient.py::TestPatientThreshold::test_threshold_check_value_critical_low <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                      [ 82%]
tests/test_models/test_patient.py::TestPatientThreshold::test_threshold_check_value_critical_high <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                     [ 82%]
tests/test_models/test_patient.py::TestPatientVitals::test_create_vitals <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                              [ 83%]
tests/test_models/test_patient.py::TestPatientVitals::test_vitals_is_manual <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                           [ 83%]
tests/test_models/test_patient.py::TestPatientVitals::test_vitals_is_abnormal <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                         [ 83%]
tests/test_models/test_patient.py::TestPatientVitals::test_vitals_is_critical <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                         [ 83%]
tests/test_models/test_patient.py::TestPatientVitals::test_patient_vitals_relation <- ../tests/test_models/test_patient.py PASSED                                                                                                                                                                                    [ 83%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_create_scheduled_intervention <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                        [ 84%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_relations <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                               [ 84%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_scheduled_duration <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                      [ 84%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_time_slot_display <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                       [ 84%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_full_display <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                            [ 84%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_is_pending <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                              [ 85%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_can_be_started <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                          [ 85%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_is_terminal <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                             [ 85%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_confirm <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                                 [ 85%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_start <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                                   [ 85%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_complete <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                                [ 86%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_cancel <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                                  [ 86%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_mark_missed <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                             [ 86%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_mark_missed_default_reason <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                              [ 86%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_reschedule <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                              [ 86%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_duration_variance <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                       [ 87%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_effective_duration <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                      [ 87%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_link_to_coordination_entry <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                              [ 87%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_cannot_start_completed <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                  [ 87%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_cannot_cancel_completed <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                 [ 87%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_cannot_complete_not_started <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                             [ 88%]
tests/test_models/test_scheduled_intervention.py::TestScheduledIntervention::test_intervention_str <- ../tests/test_models/test_scheduled_intervention.py PASSED                                                                                                                                                     [ 88%]
tests/test_models/test_tenant.py::TestTenantModel::test_create_tenant_minimal <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                          [ 88%]
tests/test_models/test_tenant.py::TestTenantModel::test_create_tenant_full <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                             [ 88%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_code_unique <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                             [ 88%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_types <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                                   [ 89%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_statuses <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                                [ 89%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_settings_jsonb <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                          [ 89%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_country_relationship <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                    [ 89%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_timestamps <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                              [ 89%]
tests/test_models/test_tenant.py::TestTenantModel::test_tenant_quotas <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                                  [ 90%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_create_subscription_minimal <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                              [ 90%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_create_subscription_full <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                 [ 90%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_subscription_plans <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                       [ 90%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_subscription_statuses <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                    [ 90%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_subscription_billing_cycles <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                              [ 91%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_subscription_trial_period <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                [ 91%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_subscription_tenant_relationship <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                         [ 91%]
tests/test_models/test_tenant.py::TestSubscriptionModel::test_subscription_cascade_delete <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                              [ 91%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_create_usage_minimal <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                [ 91%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_create_usage_full <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                   [ 92%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_usage_with_overage <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                  [ 92%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_usage_unique_period <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                 [ 92%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_usage_subscription_relationship <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                     [ 92%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_usage_cascade_delete <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                [ 92%]
tests/test_models/test_tenant.py::TestSubscriptionUsageModel::test_usage_multiple_periods <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                              [ 93%]
tests/test_models/test_tenant.py::TestTenantIsolation::test_different_tenants_same_data <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                [ 93%]
tests/test_models/test_tenant.py::TestTenantIsolation::test_tenant_subscriptions_isolation <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                             [ 93%]
tests/test_models/test_tenant.py::TestTenantValidation::test_tenant_code_required <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                      [ 93%]
tests/test_models/test_tenant.py::TestTenantValidation::test_tenant_email_required <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                     [ 93%]
tests/test_models/test_tenant.py::TestTenantValidation::test_tenant_encryption_key_required <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                            [ 94%]
tests/test_models/test_tenant.py::TestTenantValidation::test_subscription_tenant_required <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                              [ 94%]
tests/test_models/test_tenant.py::TestTenantValidation::test_subscription_invalid_tenant <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                               [ 94%]
tests/test_models/test_tenant.py::TestTenantValidation::test_usage_subscription_required <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                               [ 94%]
tests/test_models/test_tenant.py::TestTenantComputedProperties::test_tenant_is_active <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                  [ 94%]
tests/test_models/test_tenant.py::TestTenantComputedProperties::test_subscription_is_trial <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                             [ 95%]
tests/test_models/test_tenant.py::TestTenantComputedProperties::test_subscription_days_remaining <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                       [ 95%]
tests/test_models/test_tenant.py::TestTenantComputedProperties::test_usage_storage_gb <- ../tests/test_models/test_tenant.py PASSED                                                                                                                                                                                  [ 95%]
tests/test_models/test_user.py::TestUser::test_create_user <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                               [ 95%]
tests/test_models/test_user.py::TestUser::test_user_tenant_relation <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                      [ 95%]
tests/test_models/test_user.py::TestUser::test_user_email_unique <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                         [ 96%]
tests/test_models/test_user.py::TestUser::test_user_rpps_unique <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                          [ 96%]
tests/test_models/test_user.py::TestUser::test_user_full_name <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                            [ 96%]
tests/test_models/test_user.py::TestUser::test_user_display_name_medecin <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                 [ 96%]
tests/test_models/test_user.py::TestUser::test_user_display_name_non_medecin <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                             [ 96%]
tests/test_models/test_user.py::TestUser::test_user_str <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                                  [ 97%]
tests/test_models/test_user.py::TestUserRoles::test_user_roles_property <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                  [ 97%]
tests/test_models/test_user.py::TestUserRoles::test_user_role_names <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                      [ 97%]
tests/test_models/test_user.py::TestUserRoles::test_user_has_role <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                        [ 97%]
tests/test_models/test_user.py::TestUserRoles::test_user_all_permissions <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                 [ 97%]
tests/test_models/test_user.py::TestUserRoles::test_user_has_permission <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                  [ 98%]
tests/test_models/test_user.py::TestUserRoles::test_admin_has_all_permissions <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                            [ 98%]
tests/test_models/test_user.py::TestUserRoles::test_add_multiple_roles <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                   [ 98%]
tests/test_models/test_user.py::TestUserRoles::test_user_role_assigned_by <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                                [ 98%]
tests/test_models/test_user.py::TestUserEntities::test_user_entities_property <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                            [ 98%]
tests/test_models/test_user.py::TestUserEntities::test_user_primary_entity <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                               [ 99%]
tests/test_models/test_user.py::TestUserEntities::test_user_belongs_to_entity <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                            [ 99%]
tests/test_models/test_user.py::TestUserEntities::test_add_multiple_entities <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                             [ 99%]
tests/test_models/test_user.py::TestUserEntities::test_user_entity_terminate <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                             [ 99%]
tests/test_models/test_user.py::TestUserEntities::test_user_entity_contract_types <- ../tests/test_models/test_user.py PASSED                                                                                                                                                                                        [100%]

===================================================================================================================================================== warnings summary =====================================================================================================================================================
../../../../opt/anaconda3/envs/env/lib/python3.13/site-packages/_pytest/config/__init__.py:1474
  /opt/anaconda3/envs/env/lib/python3.13/site-packages/_pytest/config/__init__.py:1474: PytestConfigWarning: Unknown config option: asyncio_mode
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
====================================================================================================================================== 499 passed, 13 deselected, 1 warning in 9.76s =======================================================================================================================================
(env) odb_admin_1@admin-odbs-MacBook-Air backend % 